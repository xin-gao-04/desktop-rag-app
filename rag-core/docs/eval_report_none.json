{
  "summary": {
    "cases": 3,
    "hit_at_k": 1.0,
    "mrr": 0.4166666666666667,
    "source_coverage": 1.0,
    "answer_keyword_recall": 0.8888888888888888
  },
  "config": {
    "ollama_url": "http://127.0.0.1:11434",
    "embedding_model": "llama3.1:8b",
    "chat_model": "llama3.1:8b",
    "chunk_size": 600,
    "chunk_overlap": 120,
    "top_k": 4,
    "retrieval_strategy": "hybrid",
    "dense_candidate_multiplier": 3,
    "rrf_k": 60,
    "min_retrieval_score": 0.0,
    "max_context_chars": 5000,
    "bm25_k1": 1.5,
    "bm25_b": 0.75,
    "reranker": "none",
    "rerank_top_n": 8
  },
  "dataset": "D:\\code\\md-rag-ollama-local\\docs\\eval_set_sample.jsonl",
  "db": "D:\\code\\md-rag-ollama-local\\index.db",
  "rows": [
    {
      "question": "本地RAG构建流程是什么？",
      "expected_sources": [
        "local_deploy.md",
        "README.md"
      ],
      "must_include_any": [
        "index",
        "knowledge",
        "ollama"
      ],
      "result": {
        "question": "本地RAG构建流程是什么？",
        "answer": "根据给出的上下文，RAG本地构建流程如下：\n\n* 将Markdown文件添加到“knowledge”目录中（如README.md所示）。\n* 运行“index”命令来建立本地RAG索引。\n\n有关具体步骤，可以参考以下内容：\n- 确保“knowledge”目录下有Markdown文件(.md扩展名)。\n- 运行`python -m mdrag.cli index`或`python -m mdrag.cli doctor`（如果需要）来建立本地RAG索引。",
        "sources": [
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_1_README.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_ceb69e7386_README.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_0_local_deploy.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_ffb85f7338_local_deploy.md"
        ],
        "scores": [
          0.03278688524590164,
          0.03225806451612903,
          0.015873015873015872,
          0.015625
        ],
        "retrieval": {
          "strategy": "hybrid",
          "reranker": "none",
          "context_chars": 1094,
          "context_truncated": false
        }
      },
      "metrics": {
        "retrieved": [
          "0_1_README.md",
          "README.md",
          "0_0_local_deploy.md",
          "local_deploy.md"
        ],
        "hit_at_k": true,
        "mrr": 0.5,
        "source_coverage": 1.0,
        "matched_sources": [
          "README.md",
          "local_deploy.md"
        ],
        "answer_keyword_recall": 0.6666666666666666
      }
    },
    {
      "question": "如果doctor失败应该怎么处理？",
      "expected_sources": [
        "README.md"
      ],
      "must_include_any": [
        "doctor",
        "python -m mdrag.cli doctor"
      ],
      "result": {
        "question": "如果doctor失败应该怎么处理？",
        "answer": "如果doctor失败应该怎么处理？\n\n按照[README.md](source: D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_1_README.md)的指导， doctor 失败时需要运行以下命令：\n\n*   `python -m mdrag.cli doctor`",
        "sources": [
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_0_local_deploy.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_ffb85f7338_local_deploy.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_1_README.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_ceb69e7386_README.md"
        ],
        "scores": [
          0.032266458495966696,
          0.031754032258064516,
          0.01639344262295082,
          0.016129032258064516
        ],
        "retrieval": {
          "strategy": "hybrid",
          "reranker": "none",
          "context_chars": 1094,
          "context_truncated": false
        }
      },
      "metrics": {
        "retrieved": [
          "0_0_local_deploy.md",
          "local_deploy.md",
          "0_1_README.md",
          "README.md"
        ],
        "hit_at_k": true,
        "mrr": 0.25,
        "source_coverage": 1.0,
        "matched_sources": [
          "README.md"
        ],
        "answer_keyword_recall": 1.0
      }
    },
    {
      "question": "知识库如何加载和更新？",
      "expected_sources": [
        "README.md"
      ],
      "must_include_any": [
        "markdown",
        "index"
      ],
      "result": {
        "question": "知识库如何加载和更新？",
        "answer": "根据上下文，知识库如何加载和更新的步骤如下：\n\n* 将 Markdown 文件添加到 `knowledge/` 文件夹中\n* 运行 `index` 命令来构建本地 RAG 索引\n\n注意：确保 `.md` 文件存在于 `knowledge/` 中，以避免找不到块的问题。",
        "sources": [
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_1_README.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_ceb69e7386_README.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_0_local_deploy.md",
          "D:\\code\\md-rag-ollama-local\\.merged_knowledge\\0_ffb85f7338_local_deploy.md"
        ],
        "scores": [
          0.01639344262295082,
          0.016129032258064516,
          0.015873015873015872,
          0.015625
        ],
        "retrieval": {
          "strategy": "hybrid",
          "reranker": "none",
          "context_chars": 1094,
          "context_truncated": false
        }
      },
      "metrics": {
        "retrieved": [
          "0_1_README.md",
          "README.md",
          "0_0_local_deploy.md",
          "local_deploy.md"
        ],
        "hit_at_k": true,
        "mrr": 0.5,
        "source_coverage": 1.0,
        "matched_sources": [
          "README.md"
        ],
        "answer_keyword_recall": 1.0
      }
    }
  ]
}